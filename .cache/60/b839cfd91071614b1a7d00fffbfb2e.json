{"id":"Dr4V","dependencies":[{"name":"D:\\js-homework\\wpak\\package.json","includedInParent":true,"mtime":1603020375896},{"name":"lodash.throttle","loc":{"line":1,"column":21},"parent":"D:\\js-homework\\wpak\\src\\js\\feedback.js","resolved":"D:\\js-homework\\wpak\\node_modules\\lodash.throttle\\index.js"},{"name":"../css/common.css","loc":{"line":2,"column":7},"parent":"D:\\js-homework\\wpak\\src\\js\\feedback.js","resolved":"D:\\js-homework\\wpak\\src\\css\\common.css"},{"name":"../css/feedback-form.css","loc":{"line":3,"column":7},"parent":"D:\\js-homework\\wpak\\src\\js\\feedback.js","resolved":"D:\\js-homework\\wpak\\src\\css\\feedback-form.css"}],"generated":{"js":"\"use strict\";var e=t(require(\"lodash.throttle\"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){throw new Error('\"'+e+'\" is read-only')}require(\"../css/common.css\"),require(\"../css/feedback-form.css\");var a={},o=\"feedback-msg\",n=\"name\",c={form:document.querySelector(\".js-feedback-form\"),textarea:document.querySelector(\".js-feedback-form  textarea\")};function l(e){e.preventDefault(),console.log(\"Форма отправлена\"),e.currentTarget.reset(),localStorage.removeItem(o)}function s(e){var t=e.target.value;localStorage.setItem(o,t);var r=e.target.value;localStorage.setItem(n,r)}function u(){var e=localStorage.getItem(n);e&&(c.textarea.name=e)}c.form.addEventListener(\"submit\",l),c.textarea.addEventListener(\"input\",(0,e.default)(s,200)),c.form.addEventListener(\"input\",function(e){a[e.target.name]=e.target.value,r(\"formData\"),a=JSON.stringify(a),console.log(a)}),u();var m=localStorage.getItem(o);m&&(c.textarea.name=m);"},"sourceMaps":{"js":{"mappings":[{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":0}},{"source":"js/feedback.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"js/feedback.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"js/feedback.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"js/feedback.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"js/feedback.js","original":{"line":1,"column":0},"generated":{"line":1,"column":29}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":49}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":58}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":60}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":63}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":70}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":73}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":75}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":86}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":88}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":89}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":97}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":100}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":109}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":111}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":114}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":120}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":124}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":130}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":134}},{"source":"js/feedback.js","original":{"line":78,"column":0},"generated":{"line":1,"column":136}},{"source":"js/feedback.js","original":{"line":2,"column":0},"generated":{"line":1,"column":154}},{"source":"js/feedback.js","original":{"line":2,"column":0},"generated":{"line":1,"column":162}},{"source":"js/feedback.js","original":{"line":3,"column":0},"generated":{"line":1,"column":183}},{"source":"js/feedback.js","original":{"line":3,"column":0},"generated":{"line":1,"column":191}},{"source":"js/feedback.js","original":{"line":4,"column":0},"generated":{"line":1,"column":219}},{"source":"js/feedback.js","name":"formData","original":{"line":4,"column":6},"generated":{"line":1,"column":223}},{"source":"js/feedback.js","original":{"line":4,"column":17},"generated":{"line":1,"column":225}},{"source":"js/feedback.js","name":"STORAGE_KEY","original":{"line":6,"column":6},"generated":{"line":1,"column":228}},{"source":"js/feedback.js","original":{"line":6,"column":20},"generated":{"line":1,"column":230}},{"source":"js/feedback.js","name":"STORAGE__KEY","original":{"line":7,"column":6},"generated":{"line":1,"column":245}},{"source":"js/feedback.js","original":{"line":7,"column":21},"generated":{"line":1,"column":247}},{"source":"js/feedback.js","name":"refs","original":{"line":8,"column":6},"generated":{"line":1,"column":254}},{"source":"js/feedback.js","original":{"line":8,"column":13},"generated":{"line":1,"column":256}},{"source":"js/feedback.js","name":"form","original":{"line":9,"column":2},"generated":{"line":1,"column":257}},{"source":"js/feedback.js","name":"document","original":{"line":9,"column":8},"generated":{"line":1,"column":262}},{"source":"js/feedback.js","name":"querySelector","original":{"line":9,"column":17},"generated":{"line":1,"column":271}},{"source":"js/feedback.js","original":{"line":9,"column":31},"generated":{"line":1,"column":285}},{"source":"js/feedback.js","name":"textarea","original":{"line":10,"column":2},"generated":{"line":1,"column":306}},{"source":"js/feedback.js","name":"document","original":{"line":10,"column":12},"generated":{"line":1,"column":315}},{"source":"js/feedback.js","name":"querySelector","original":{"line":10,"column":21},"generated":{"line":1,"column":324}},{"source":"js/feedback.js","original":{"line":10,"column":35},"generated":{"line":1,"column":338}},{"source":"js/feedback.js","original":{"line":27,"column":0},"generated":{"line":1,"column":370}},{"source":"js/feedback.js","name":"onFormSubmit","original":{"line":27,"column":9},"generated":{"line":1,"column":379}},{"source":"js/feedback.js","name":"evt","original":{"line":27,"column":22},"generated":{"line":1,"column":381}},{"source":"js/feedback.js","name":"evt","original":{"line":28,"column":2},"generated":{"line":1,"column":384}},{"source":"js/feedback.js","name":"preventDefault","original":{"line":28,"column":6},"generated":{"line":1,"column":386}},{"source":"js/feedback.js","name":"console","original":{"line":29,"column":2},"generated":{"line":1,"column":403}},{"source":"js/feedback.js","name":"log","original":{"line":29,"column":10},"generated":{"line":1,"column":411}},{"source":"js/feedback.js","original":{"line":29,"column":14},"generated":{"line":1,"column":415}},{"source":"js/feedback.js","name":"evt","original":{"line":30,"column":2},"generated":{"line":1,"column":435}},{"source":"js/feedback.js","name":"currentTarget","original":{"line":30,"column":6},"generated":{"line":1,"column":437}},{"source":"js/feedback.js","name":"reset","original":{"line":30,"column":20},"generated":{"line":1,"column":451}},{"source":"js/feedback.js","name":"localStorage","original":{"line":31,"column":2},"generated":{"line":1,"column":459}},{"source":"js/feedback.js","name":"removeItem","original":{"line":31,"column":15},"generated":{"line":1,"column":472}},{"source":"js/feedback.js","name":"STORAGE_KEY","original":{"line":31,"column":26},"generated":{"line":1,"column":483}},{"source":"js/feedback.js","original":{"line":39,"column":0},"generated":{"line":1,"column":486}},{"source":"js/feedback.js","name":"onTextareaInput","original":{"line":39,"column":9},"generated":{"line":1,"column":495}},{"source":"js/feedback.js","name":"evt","original":{"line":39,"column":25},"generated":{"line":1,"column":497}},{"source":"js/feedback.js","name":"message","original":{"line":40,"column":8},"generated":{"line":1,"column":500}},{"source":"js/feedback.js","name":"message","original":{"line":40,"column":8},"generated":{"line":1,"column":504}},{"source":"js/feedback.js","name":"evt","original":{"line":40,"column":18},"generated":{"line":1,"column":506}},{"source":"js/feedback.js","name":"target","original":{"line":40,"column":22},"generated":{"line":1,"column":508}},{"source":"js/feedback.js","name":"value","original":{"line":40,"column":29},"generated":{"line":1,"column":515}},{"source":"js/feedback.js","name":"localStorage","original":{"line":41,"column":2},"generated":{"line":1,"column":521}},{"source":"js/feedback.js","name":"setItem","original":{"line":41,"column":15},"generated":{"line":1,"column":534}},{"source":"js/feedback.js","name":"STORAGE_KEY","original":{"line":41,"column":23},"generated":{"line":1,"column":542}},{"source":"js/feedback.js","name":"message","original":{"line":41,"column":36},"generated":{"line":1,"column":544}},{"source":"js/feedback.js","name":"name","original":{"line":42,"column":8},"generated":{"line":1,"column":547}},{"source":"js/feedback.js","name":"name","original":{"line":42,"column":8},"generated":{"line":1,"column":551}},{"source":"js/feedback.js","name":"evt","original":{"line":42,"column":15},"generated":{"line":1,"column":553}},{"source":"js/feedback.js","name":"target","original":{"line":42,"column":19},"generated":{"line":1,"column":555}},{"source":"js/feedback.js","name":"value","original":{"line":42,"column":26},"generated":{"line":1,"column":562}},{"source":"js/feedback.js","name":"localStorage","original":{"line":43,"column":2},"generated":{"line":1,"column":568}},{"source":"js/feedback.js","name":"setItem","original":{"line":43,"column":15},"generated":{"line":1,"column":581}},{"source":"js/feedback.js","name":"STORAGE__KEY","original":{"line":43,"column":23},"generated":{"line":1,"column":589}},{"source":"js/feedback.js","name":"name","original":{"line":43,"column":37},"generated":{"line":1,"column":591}},{"source":"js/feedback.js","original":{"line":50,"column":0},"generated":{"line":1,"column":594}},{"source":"js/feedback.js","name":"populateTextarea","original":{"line":50,"column":9},"generated":{"line":1,"column":603}},{"source":"js/feedback.js","name":"savedName","original":{"line":51,"column":8},"generated":{"line":1,"column":607}},{"source":"js/feedback.js","name":"savedName","original":{"line":51,"column":8},"generated":{"line":1,"column":611}},{"source":"js/feedback.js","name":"localStorage","original":{"line":51,"column":20},"generated":{"line":1,"column":613}},{"source":"js/feedback.js","name":"getItem","original":{"line":51,"column":33},"generated":{"line":1,"column":626}},{"source":"js/feedback.js","name":"STORAGE__KEY","original":{"line":51,"column":41},"generated":{"line":1,"column":634}},{"source":"js/feedback.js","name":"savedName","original":{"line":52,"column":6},"generated":{"line":1,"column":637}},{"source":"js/feedback.js","name":"refs","original":{"line":53,"column":4},"generated":{"line":1,"column":641}},{"source":"js/feedback.js","name":"textarea","original":{"line":53,"column":9},"generated":{"line":1,"column":643}},{"source":"js/feedback.js","name":"name","original":{"line":53,"column":18},"generated":{"line":1,"column":652}},{"source":"js/feedback.js","name":"savedName","original":{"line":53,"column":25},"generated":{"line":1,"column":657}},{"source":"js/feedback.js","name":"refs","original":{"line":13,"column":0},"generated":{"line":1,"column":660}},{"source":"js/feedback.js","name":"form","original":{"line":13,"column":5},"generated":{"line":1,"column":662}},{"source":"js/feedback.js","name":"addEventListener","original":{"line":13,"column":10},"generated":{"line":1,"column":667}},{"source":"js/feedback.js","original":{"line":13,"column":27},"generated":{"line":1,"column":684}},{"source":"js/feedback.js","name":"onFormSubmit","original":{"line":13,"column":37},"generated":{"line":1,"column":693}},{"source":"js/feedback.js","name":"refs","original":{"line":14,"column":0},"generated":{"line":1,"column":696}},{"source":"js/feedback.js","name":"textarea","original":{"line":14,"column":5},"generated":{"line":1,"column":698}},{"source":"js/feedback.js","name":"addEventListener","original":{"line":14,"column":14},"generated":{"line":1,"column":707}},{"source":"js/feedback.js","original":{"line":14,"column":31},"generated":{"line":1,"column":724}},{"source":"js/feedback.js","original":{"line":14,"column":40},"generated":{"line":1,"column":733}},{"source":"js/feedback.js","name":"onTextareaInput","original":{"line":14,"column":49},"generated":{"line":1,"column":735}},{"source":"js/feedback.js","name":"onTextareaInput","original":{"line":14,"column":49},"generated":{"line":1,"column":737}},{"source":"js/feedback.js","name":"onTextareaInput","original":{"line":14,"column":49},"generated":{"line":1,"column":746}},{"source":"js/feedback.js","original":{"line":14,"column":66},"generated":{"line":1,"column":748}},{"source":"js/feedback.js","name":"refs","original":{"line":15,"column":0},"generated":{"line":1,"column":754}},{"source":"js/feedback.js","name":"form","original":{"line":15,"column":5},"generated":{"line":1,"column":756}},{"source":"js/feedback.js","name":"addEventListener","original":{"line":15,"column":10},"generated":{"line":1,"column":761}},{"source":"js/feedback.js","original":{"line":15,"column":27},"generated":{"line":1,"column":778}},{"source":"js/feedback.js","original":{"line":15,"column":36},"generated":{"line":1,"column":786}},{"source":"js/feedback.js","name":"evt","original":{"line":15,"column":36},"generated":{"line":1,"column":795}},{"source":"js/feedback.js","name":"formData","original":{"line":16,"column":2},"generated":{"line":1,"column":798}},{"source":"js/feedback.js","name":"evt","original":{"line":16,"column":11},"generated":{"line":1,"column":800}},{"source":"js/feedback.js","name":"target","original":{"line":16,"column":15},"generated":{"line":1,"column":802}},{"source":"js/feedback.js","name":"name","original":{"line":16,"column":22},"generated":{"line":1,"column":809}},{"source":"js/feedback.js","name":"evt","original":{"line":16,"column":30},"generated":{"line":1,"column":815}},{"source":"js/feedback.js","name":"target","original":{"line":16,"column":34},"generated":{"line":1,"column":817}},{"source":"js/feedback.js","name":"value","original":{"line":16,"column":41},"generated":{"line":1,"column":824}},{"source":"js/feedback.js","name":"JSON","original":{"line":17,"column":13},"generated":{"line":1,"column":830}},{"source":"js/feedback.js","name":"JSON","original":{"line":17,"column":13},"generated":{"line":1,"column":832}},{"source":"js/feedback.js","name":"formData","original":{"line":17,"column":2},"generated":{"line":1,"column":844}},{"source":"js/feedback.js","name":"JSON","original":{"line":17,"column":13},"generated":{"line":1,"column":846}},{"source":"js/feedback.js","name":"stringify","original":{"line":17,"column":18},"generated":{"line":1,"column":851}},{"source":"js/feedback.js","name":"formData","original":{"line":17,"column":28},"generated":{"line":1,"column":861}},{"source":"js/feedback.js","name":"console","original":{"line":18,"column":2},"generated":{"line":1,"column":864}},{"source":"js/feedback.js","name":"log","original":{"line":18,"column":10},"generated":{"line":1,"column":872}},{"source":"js/feedback.js","name":"formData","original":{"line":18,"column":14},"generated":{"line":1,"column":876}},{"source":"js/feedback.js","name":"populateTextarea","original":{"line":21,"column":0},"generated":{"line":1,"column":881}},{"source":"js/feedback.js","name":"savedMessage","original":{"line":57,"column":8},"generated":{"line":1,"column":885}},{"source":"js/feedback.js","name":"savedMessage","original":{"line":57,"column":8},"generated":{"line":1,"column":889}},{"source":"js/feedback.js","name":"localStorage","original":{"line":57,"column":23},"generated":{"line":1,"column":891}},{"source":"js/feedback.js","name":"getItem","original":{"line":57,"column":36},"generated":{"line":1,"column":904}},{"source":"js/feedback.js","name":"STORAGE_KEY","original":{"line":57,"column":44},"generated":{"line":1,"column":912}},{"source":"js/feedback.js","name":"savedMessage","original":{"line":58,"column":6},"generated":{"line":1,"column":915}},{"source":"js/feedback.js","name":"refs","original":{"line":59,"column":4},"generated":{"line":1,"column":919}},{"source":"js/feedback.js","name":"textarea","original":{"line":59,"column":9},"generated":{"line":1,"column":921}},{"source":"js/feedback.js","name":"name","original":{"line":59,"column":18},"generated":{"line":1,"column":930}},{"source":"js/feedback.js","name":"savedMessage","original":{"line":59,"column":25},"generated":{"line":1,"column":935}}],"sources":{"js/feedback.js":"import throttle from \"lodash.throttle\";\r\nimport \"../css/common.css\";\r\nimport \"../css/feedback-form.css\";\r\nconst formData = {};\r\n\r\nconst STORAGE_KEY = \"feedback-msg\";\r\nconst STORAGE__KEY = \"name\";\r\nconst refs = {\r\n  form: document.querySelector(\".js-feedback-form\"),\r\n  textarea: document.querySelector(\".js-feedback-form  textarea\")\r\n};\r\n\r\nrefs.form.addEventListener(\"submit\", onFormSubmit);\r\nrefs.textarea.addEventListener(\"input\", throttle(onTextareaInput, 200));\r\nrefs.form.addEventListener(\"input\", evt => {\r\n  formData[evt.target.name] = evt.target.value;\r\n  formData = JSON.stringify(formData);\r\n  console.log(formData);\r\n});\r\n\r\npopulateTextarea();\r\n// *\r\n//  * - Останавливаем поведение по умолчанию\r\n//  * - Убираем сообщение из хранилища\r\n//  * - Очищаем форму\r\n//  *\r\nfunction onFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  console.log(\"Форма отправлена\");\r\n  evt.currentTarget.reset();\r\n  localStorage.removeItem(STORAGE_KEY);\r\n}\r\n\r\n// *\r\n//  * - Получаем значение поля\r\n//  * - Сохраняем его в хранилище\r\n//  * - Можно добавить throttle\r\n//  *\r\nfunction onTextareaInput(evt) {\r\n  const message = evt.target.value;\r\n  localStorage.setItem(STORAGE_KEY, message);\r\n  const name = evt.target.value;\r\n  localStorage.setItem(STORAGE__KEY, name);\r\n}\r\n\r\n// *\r\n//  * - Получаем значение из хранилища\r\n//  * - Если там что-то было, обновляем DOM\r\n//  *\r\nfunction populateTextarea() {\r\n  const savedName = localStorage.getItem(STORAGE__KEY);\r\n  if (savedName) {\r\n    refs.textarea.name = savedName;\r\n  }\r\n}\r\n{\r\n  const savedMessage = localStorage.getItem(STORAGE_KEY);\r\n  if (savedMessage) {\r\n    refs.textarea.name = savedMessage;\r\n  }\r\n}\r\n\r\n// Домой/ сделать так чтобы сохраняло не только сообщение но и имя, и все в одном обьекте\r\n\r\n// const formData = {}\r\n\r\n// refs.form.addEventListener('input', (e) => {\r\n//   console.log(e.target.name)\r\n//   console.log(e.target.value)\r\n\r\n//   formData[e.target.name] = e.target.value\r\n//   localStorage.setItem('name', JSON.stringify(formData))\r\n\r\n//   const savedSettings = localStorage.getItem('name')\r\n//   const parsedSettings = JSON.parse(parsedSettings)\r\n\r\n//   console.log(savedSettings)\r\n//})\r\n"},"lineCount":null}},"error":null,"hash":"1f186b714792857be121ba5815eb2191","cacheData":{"env":{}}}